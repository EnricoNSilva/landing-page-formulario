<div class="main-wrapper">

  <div class="left-content">
    <div class="badge">CASE 2025</div>
    
    <h1>
      AGORA! Participe da 
      <span class="highlight">Ação Promocional Uber</span>
      (R$ 250) e Agende sua Demo.
    </h1>
    
    <p>
      Valide a integração <strong>Radar + Uber Business API</strong> e otimize o custo da sua operação.
    </p>

    <div class="info-cards">
      <div class="info-card">
        <span class="info-value">R$ 250</span>
        <span class="info-label">Crédito Uber</span>
      </div>
      <div class="info-card">
        <span class="info-value">API</span>
        <span class="info-label">Integração</span>
      </div>
      <div class="info-card">
        <span class="info-value">Demo</span>
        <span class="info-label">Gratuita</span>
      </div>
    </div>
  </div>
  <!-- Coloque no canto inferior direito, bem pequeno -->
<a href="/admin" class="admin-link">admin</a>
  <div class="form-card">
    <ng-container *ngIf="!formSuccess">
      <div class="stepper">
        <div class="step-line"></div>
        <div class="step-circle" [class.active]="currentStep >= 1">1</div>
        <div class="step-circle" [class.active]="currentStep >= 2">2</div>
      </div>

      <div *ngIf="currentStep === 1">
        <div class="form-header">
          <h2>Passo 1 de 2: Seus Dados</h2>
          <p>Preencha seus dados para continuar</p>
        </div>

        <div class="input-group" [class.error]="fieldErrors['nome']">
          <label>Nome Completo <span>*</span></label>
          <input type="text" inputmode="text" [(ngModel)]="lead.nome" (input)="filterOnlyLetters('nome')" placeholder="João da Silva">
          <small class="error-text" *ngIf="fieldErrors['nome']">{{ fieldErrors['nome'] }}</small>
        </div>

        <div class="input-group" [class.error]="fieldErrors['perfil']">
          <label>Qual seu perfil? <span>*</span></label>
          <select [(ngModel)]="lead.perfil">
            <option value="" disabled selected>Selecione...</option>
            <option value="Estudante">Estudante</option>
            <option value="Executivo">Executivo</option>
            <option value="Empresário">Empresário</option>
            <option value="Investidor">Investidor</option>
          </select>
          <small class="error-text" *ngIf="fieldErrors['perfil']">{{ fieldErrors['perfil'] }}</small>
        </div>

        <ng-container *ngIf="['Executivo', 'Empresário', 'Investidor'].includes(lead.perfil)">
          <div class="input-group" [class.error]="fieldErrors['empresa']">
            <label>Empresa <span>*</span></label>
            <input type="text" inputmode="text" [(ngModel)]="lead.empresa" (input)="filterOnlyLetters('empresa')">
            <small class="error-text" *ngIf="fieldErrors['empresa']">{{ fieldErrors['empresa'] }}</small>
          </div>
          <div class="input-group" [class.error]="fieldErrors['cargo']">
            <label>Cargo <span>*</span></label>
            <input type="text" inputmode="text" [(ngModel)]="lead.cargo" (input)="filterOnlyLetters('cargo')">
            <small class="error-text" *ngIf="fieldErrors['cargo']">{{ fieldErrors['cargo'] }}</small>
          </div>
        </ng-container>

        <div class="input-group" [class.error]="fieldErrors['email']">
          <label>E-mail <span>*</span></label>
          <input type="email" [(ngModel)]="lead.email" placeholder="nome@email.com">
          <small class="error-text" *ngIf="fieldErrors['email']">{{ fieldErrors['email']}}</small>
        </div>

        <div class="input-group" [class.error]="fieldErrors['telefone']">
          <label>Telefone/WhatsApp <span>*</span></label>
          <input 
              type="tel" 
              [(ngModel)]="lead.telefone" 
              (input)="formatarTelefone($event)" 
              placeholder="(11) 99999-9999"
              maxlength="15"
              [class.error]="fieldErrors.telefone">
          <small class="error-text" *ngIf="fieldErrors['telefone']">{{ fieldErrors['telefone'] }}</small>
        </div>

          <button class="btn-primary" (click)="nextStep()" [disabled]="loadingStep1">
              <span *ngIf="!loadingStep1">AVANÇAR</span>
              <span *ngIf="loadingStep1">VERIFICANDO...</span>
          </button>
      </div>

      <div *ngIf="currentStep === 2">
        <div class="form-header">
          <h2>Passo 2 de 2: Detalhes</h2>
          <p>Responda para concorrer ao prêmio</p>
        </div>

        <div class="input-group" [class.error]="fieldErrors['perguntaChecagem']">
          <label>Qual software mede a produtividade? <span>*</span></label>
          <input type="text" inputmode="text" [(ngModel)]="lead.perguntaChecagem" (input)="filterOnlyLetters('perguntaChecagem')">
          <small class="error-text" *ngIf="fieldErrors['perguntaChecagem']">{{ fieldErrors['perguntaChecagem'] }}</small>
        </div>

        <div class="input-group">
          <label>Desafio de produtividade (Opcional)</label>
          <textarea [(ngModel)]="lead.perguntaGeral" rows="3"></textarea>
        </div>

        <div class="input-group" [class.error]="fieldErrors['adesao']">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="lead.adesao" class="checkbox-input"> Concordo com o Termo de Adesão <span>*</span>
          </label>
          <small class="error-text" *ngIf="fieldErrors['adesao']">{{ fieldErrors['adesao'] }}</small>
        </div>

        <div class="input-group" [class.error]="fieldErrors['LGPD']">
          <label class="checkbox-label">
            <input type="checkbox" [(ngModel)]="lead.LGPD" class="checkbox-input"> Autorizo uso de dados (LGPD) <span>*</span>
          </label>
          <small class="error-text" *ngIf="fieldErrors['LGPD']">{{ fieldErrors['LGPD'] }}</small>
        </div>

        <div *ngIf="globalError" class="global-error">
          {{ globalError }}
        </div>

        <div class="buttons-container">
          <button type="button" (click)="prevStep()" class="btn-secondary" [disabled]="loadingStep2">Voltar</button>
          <button class="btn-primary" (click)="enviarLead()" [disabled]="loadingStep2">
            <span *ngIf="!loadingStep2">PARTICIPAR AGORA</span>
            <span *ngIf="loadingStep2">ENVIANDO...</span>
          </button>
        </div>
      </div>
    </ng-container>

    <div *ngIf="formSuccess" class="success-container">
      <div class="success-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
          <polyline points="22 4 12 14.01 9 11.01"></polyline>
        </svg>
      </div>

      <h2>Cadastro Confirmado!</h2>
      <p>Obrigado! Você está participando. Boa sorte!</p>

      <div class="success-message-box">
        <p>Siga-nos nas redes sociais para acompanhar o resultado:</p>
        <a href="https://instagram.com/radar_no_insta/" target="_blank" class="social-link">@radardeprodutividade</a>
      </div>

      <button class="btn-primary" (click)="resetToStart()">
        Cadastrar Outra Pessoa
      </button>
    </div>

  </div>
</div>